<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta property="og:image" content="/CoRT/favicon_512.png">
		<title>Public Trainer Setups - Champions of Regnum</title>
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<meta name="keywords" content="regnumsentinel champions regnum online trainer entrenador bosses war warzone guerra status">
		<meta name="description" content="Champions of Regnum trainer, war status, bosses respawn and bz countdowns">
		<link rel="stylesheet" href="/css/style.css">
		<link rel="icon" type="image/png" href="/favicon.png">
		<link rel="apple-touch-icon" href="/favicon.png" sizes="192x192">
		<script type="module" src="/js/menu.js"></script>
		<script>
			window.addEventListener('DOMContentLoaded', function() {
				var iframe = document.getElementById('iframe');
				var loading = document.getElementById('loading');
				var iframeContainer = document.getElementById('iframe-container');

				iframe.addEventListener('load', function() {
					loading.style.display = 'none';
					iframeContainer.style.display = 'block';
				});
			});
		</script>
	</head>
	<body>
		<div id="menu" class="card"></div>
		<div id="main-container">
			<div class="bugnum but on your side">
				<noscript>
					For full functionality of this site it is necessary to enable JavaScript.
					Here are the <a href="https://www.enable-javascript.com/">
						instructions how to enable JavaScript in your web browser</a>.
				</noscript>
			</div>
			<h1 id="title">Public Trainer Setups</h1>
			<div id="titleinfo">Setups shared by other users. To add your setup, save it in your account and change it to public.</div>
			<!-- center>
				<a href="rankingarchive.html"><button>Ra</button></a>
				<a href="rankingarchive-valhalla.html"><button>Valhalla (abandoned)</button></a>
			</!-->
			<style>
				.setupsTable {
					width: 100%;
				}
				.setupsTable th, .setupsTable td {
					padding: 8px;
					text-align: left;
				}
			</style>
			<div class="card center">
				<!-- table for setups -->
				<table id="setups" class="setupsTable">
					<thead>
						<tr>
							<th>Name</th>
							<th>Class</th>
							<th>Version</th>
							<th>Created</th>
							<th>Creator</th>
						</tr>
					</thead>
					<tbody>
					</tbody>
				</table>

			</div>
		</div>
		<script>
			// fetch the setups from API
			fetch('/api/v1/trainer/setups')
				.then(response => response.json())
				.then(data => {
					var setups = data;
					var table = document.getElementById('setups').getElementsByTagName('tbody')[0];
					// if there are no setups, show a message
					if (setups.length === 0) {
						var row = table.insertRow(-1);
						var cell = row.insertCell(0);
						cell.colSpan = 2;
						cell.innerHTML = 'There are no public setups yet. Create one by clicking the "Save" button in the <a href="/">trainer</a>, then set it to public.';
						return;
					}

					for (var i = 0; i < setups.length; i++) {
						var setup = setups[i];
						var row = table.insertRow(-1);

						// put the ID in a hidden cell
						var id = row.insertCell(0);
						id.innerHTML = setup.id;
						id.style.display = 'none';

						var name = row.insertCell(1);
						name.innerHTML = '<a href="/?t=' + setup.url + '">' + setup.name + '</a>'

						var setup_class = row.insertCell(2);
						setup_class.innerHTML = setup.setup_class + ' ' + setup.setup_level;

						var setup_version = row.insertCell(3);
						setup_version.innerHTML = setup.setup_version;

						var created = row.insertCell(4);
						// convert the date to a human-readable format
						var date = new Date(setup.created_at);
						created.innerHTML = date.toLocaleString();

						var creator = row.insertCell(5);
						creator.innerHTML = setup.nickname;

						// var actions = row.insertCell(1);
						// var loadButton = document.createElement('button');
						// loadButton.innerHTML = 'Load';
						// loadButton.url = 'hi';
						// actions.appendChild(loadButton);

						// var shareButton = document.createElement('button');
						// shareButton.innerHTML = 'Share';
						// actions.appendChild(shareButton);

						// var saveButton = document.createElement('button');
						// saveButton.innerHTML = 'Save';
						// actions.appendChild(saveButton);
					}
				});

			
		</script>
		<div id="footer" class="card">
			<div id="footer-menu"></div>
			<!-- Matomo -->
			<script>
				var _paq = window._paq = window._paq || [];
				/* tracker methods like "setCustomDimension" should be called before "trackPageView" */
				_paq.push(['trackPageView']);
				_paq.push(['enableLinkTracking']);
				(function() {
				var u="//analytics.treudler.net/";
				_paq.push(['setTrackerUrl', u+'matomo.php']);
				_paq.push(['setSiteId', '20']);
				var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
				g.async=true; g.src=u+'matomo.js'; s.parentNode.insertBefore(g,s);
				})();
			</script>
			<noscript><p><img referrerpolicy="no-referrer-when-downgrade" src="//analytics.treudler.net/matomo.php?idsite=20&amp;rec=1" style="border:0;" alt="" /></p></noscript>
			<!-- End Matomo Code -->
		</div>	</body>
</html>
